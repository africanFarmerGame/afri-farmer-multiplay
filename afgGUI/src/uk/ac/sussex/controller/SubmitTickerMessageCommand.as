package uk.ac.sussex.controller {	import uk.ac.sussex.serverhandlers.HomeHandlers;	import uk.ac.sussex.model.RequestProxy;	import uk.ac.sussex.model.valueObjects.Form;	import org.puremvc.as3.multicore.interfaces.INotification;	import org.puremvc.as3.multicore.patterns.command.SimpleCommand;	/**	 * @author em97	 */	public class SubmitTickerMessageCommand extends SimpleCommand {		override public function execute(note:INotification):void {			trace("SubmitTickerMessageCommand sez: I has been fired. " + note.getName());			var form:Form = note.getBody() as Form;			var tickerRequest:RequestProxy = facade.retrieveProxy(HomeHandlers.SUBMIT_TICKER_REQUEST + RequestProxy.NAME) as RequestProxy;						var tickerMessage:String = form.getFieldValue(HomeHandlers.TICKER_MESSAGE);			if(tickerMessage==null){				trace("SubmitTickerMessageCommand sez: we has a problem - our message is null. ");				tickerMessage = "Sending a null message";			}			tickerRequest.setParamValue(HomeHandlers.TICKER_MESSAGE, tickerMessage);						var tickerExpires:int = int(form.getFieldValue(HomeHandlers.TICKER_EXPIRES));			tickerRequest.setParamValue(HomeHandlers.TICKER_EXPIRES, tickerExpires);			if(tickerExpires == 1){				var tickerDuration:Number = Number(form.getFieldValue(HomeHandlers.TICKER_DURATION));				tickerRequest.setParamValue(HomeHandlers.TICKER_DURATION, tickerDuration);				tickerRequest.setParamValue(HomeHandlers.TICKER_DURATION_UNIT, form.getFieldValue(HomeHandlers.TICKER_DURATION_UNIT));			} else {				tickerRequest.setParamValue(HomeHandlers.TICKER_DURATION, 0);				tickerRequest.setParamValue(HomeHandlers.TICKER_DURATION_UNIT, "E"); //E for error.			}						tickerRequest.sendRequest();		}	}}